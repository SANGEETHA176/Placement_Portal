<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeLeap - Programming Practice Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root {
            --bg-page: #ffffff;
            --bg-secondary: #f9fafb;
            --primary-purple: #6366f1;
            --text-main: #111827;
            --text-muted: #6b7280;
            --border: #e5e7eb;
            --editor-bg: #1e1e1e;
            --success-green: #059669;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-page);
            color: var(--text-main);
            margin: 0;
            overflow-x: hidden;
        }

        header {
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            font-size: 1.1rem;
            border-bottom: 1px solid var(--border);
            background: white;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .container { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }
        .hidden { display: none !important; }

        /* Dashboard */
        .dashboard-section { text-align: center; padding: 5rem 1rem; }
        .dashboard-section h1 { font-size: 3rem; font-weight: 800; margin-bottom: 1rem; }
        .dashboard-section p { color: var(--text-muted); font-size: 1.1rem; max-width: 700px; margin: 0 auto 4rem; }

        .lang-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; }
        .lang-card { background: white; border-radius: 12px; overflow: hidden; border: 1px solid var(--border); text-align: left; }
        .card-img { height: 180px; background: #2d2d2d; overflow: hidden; }
        .card-img img { width: 100%; height: 100%; object-fit: cover; opacity: 0.7; }
        .card-body { padding: 1.5rem; }
        .btn-primary { 
            width: 100%; background: var(--primary-purple); color: white; border: none; padding: 12px; 
            border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; 
            justify-content: center; gap: 8px; transition: 0.2s;
        }
        .btn-primary:hover { background: #4f46e5; }
        .btn-primary:disabled { background: #94a3b8; cursor: not-allowed; }

        /* Modal */
        .modal-overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); 
            display: none; align-items: center; justify-content: center; z-index: 100;
        }
        .modal { background: #262626; color: white; width: 90%; max-width: 540px; border-radius: 16px; padding: 2.5rem; }

        /* Interface */
        .practice-view { display: none; height: calc(100vh - 60px); background: #f3f4f6; padding: 1rem; box-sizing: border-box; }
        .split-container { display: flex; gap: 1rem; height: calc(100% - 60px); }
        .panel { flex: 1; background: white; border-radius: 12px; border: 1px solid var(--border); display: flex; flex-direction: column; overflow: hidden; }
        
        .panel-nav { display: flex; padding: 10px; border-bottom: 1px solid var(--border); gap: 10px; background: white; }
        .tab { padding: 8px 16px; border-radius: 6px; font-size: 0.9rem; font-weight: 500; cursor: pointer; color: var(--text-muted); transition: 0.2s; }
        .tab.active { background: #1e1e1e; color: white; }
        
        .problem-content { padding: 1.5rem; flex: 1; overflow-y: auto; }
        .difficulty-tag { background: #ecfdf5; color: var(--success-green); padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; margin: 10px 0; display: inline-block; }
        
        .editor-container { flex: 1; background: var(--editor-bg); color: #d4d4d4; font-family: 'Courier New', monospace; padding: 1.5rem; outline: none; white-space: pre; overflow: auto; border:none; }
        
        .output-box { height: 120px; background: #f9fafb; border-top: 1px solid var(--border); padding: 1rem; font-family: monospace; font-size: 0.9rem; color: #374151; overflow-y: auto; display: none;}
        .output-box.visible { display: block; }

        .bottom-bar { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; }
        .btn-secondary { background: #f3f4f6; color: #374151; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 8px; }
    </style>
</head>
<body>

<header><i data-lucide="code-2" color="#6366f1"></i> CodeLeap</header>

<div id="dashboard" class="container dashboard-section">
    <h1>Programming Practice Portal</h1>
    <p>Sharpen your coding skills with our curated set of problems. Choose a language to get started.</p>
    <div class="lang-grid">
        <div class="lang-card">
            <div class="card-img"><img src="https://images.unsplash.com/photo-1579468118864-1b9ea3c0db4a?q=80&w=400"></div>
            <div class="card-body">
                <h3>JavaScript</h3>
                <button class="btn-primary" onclick="openAgreement('JavaScript')">Start Practice <i data-lucide="arrow-right"></i></button>
            </div>
        </div>
        <div class="lang-card">
            <div class="card-img"><img src="https://images.unsplash.com/photo-1517694712202-14dd9538aa97?q=80&w=400"></div>
            <div class="card-body"><h3>Java</h3><button class="btn-primary" onclick="openAgreement('Java')">Start Practice <i data-lucide="arrow-right"></i></button></div>
        </div>
        <div class="lang-card">
            <div class="card-img"><img src="https://images.unsplash.com/photo-1627398242454-45a1465c2479?q=80&w=400"></div>
            <div class="card-body"><h3>C++</h3><button class="btn-primary" onclick="openAgreement('C++')">Start Practice <i data-lucide="arrow-right"></i></button></div>
        </div>
    </div>
</div>

<div id="modal-overlay" class="modal-overlay">
    <div class="modal">
        <h2>Practice Integrity Agreement</h2>
        <div style="background:#1a1a1a; padding:1.5rem; border-radius:12px; margin:1.5rem 0;">
            <ul style="color:#a3a3a3; line-height:1.8;">
                <li>All problems must be solved independently without assistance.</li>
                <li>Do not copy and paste solutions from external websites or AI tools.</li>
                <li>Your submitted code must be your own original work.</li>
            </ul>
        </div>
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <label style="cursor:pointer"><input type="checkbox" id="agree-check" onchange="document.getElementById('proc-btn').disabled = !this.checked"> I agree to the practice guidelines.</label>
            <button id="proc-btn" class="btn-primary" style="width:140px;" disabled onclick="enterPractice()">Proceed <i data-lucide="arrow-right"></i></button>
        </div>
    </div>
</div>

<div id="practice-view" class="practice-view">
    <div class="split-container">
        <div class="panel">
            <div class="panel-nav">
                <div class="tab active" onclick="switchTab('desc')" id="tab-desc">Description</div>
                <div class="tab" onclick="switchTab('cases')" id="tab-cases">Sample Cases</div>
            </div>
            <div class="problem-content" id="problem-content">
                </div>
        </div>
        <div class="panel">
            <div class="editor-container" contenteditable="true" id="editor-field" spellcheck="false"></div>
            <div id="output-field" class="output-box"></div>
            <div class="panel-nav" style="justify-content:flex-end; border-top:1px solid var(--border); border-bottom:none;">
                <button class="btn-secondary" onclick="runCode()"><i data-lucide="play" size="16"></i> Run Code</button>
                <button class="btn-primary" style="width:auto; padding:8px 20px;" onclick="submitSolution()">Submit Solution</button>
            </div>
        </div>
    </div>
    <div class="bottom-bar">
        <button class="btn-secondary" id="btn-prev" onclick="changeProblem(-1)"><i data-lucide="chevron-left"></i> Previous</button>
        <div id="prob-indicator" style="font-weight:600; color:var(--text-muted)">Problem 1 of 3</div>
        <button class="btn-primary" id="btn-next" style="width:auto; padding:10px 25px;" onclick="changeProblem(1)">Next <i data-lucide="chevron-right"></i></button>
    </div>
</div>

<div id="success-view" class="dashboard-section container hidden">
    <i data-lucide="check-circle" size="64" color="#059669"></i>
    <h1 style="margin-top:1.5rem">Practice Completed Successfully!</h1>
    <p>Great job! You have completed all the problems in this session.</p>
    <button class="btn-primary" style="width:200px; margin:0 auto;" onclick="location.reload()">Return Home</button>
</div>

<script>
    lucide.createIcons();
    let currentLang = "";
    let problemIdx = 0;
    let currentView = 'desc';

    const problems = [
        { 
            title: "Two Sum", 
            difficulty: "Easy",
            desc: "Given an array of integers nums and an integer target, return indices of the two numbers such that they add up to target. You may assume that each input would have exactly one solution.", 
            input: "nums = [2,7,11,15], target = 9", 
            output: "[0,1]", 
            boilerplate: "function twoSum(nums, target) {\n    // Write your code here\n};" 
        },
        { 
            title: "Palindrome Number", 
            difficulty: "Easy",
            desc: "Given an integer x, return true if x is a palindrome, and false otherwise. An integer is a palindrome when it reads the same backward as forward.", 
            input: "x = 121", 
            output: "true", 
            boilerplate: "function isPalindrome(x) {\n    // Write your code here\n};" 
        },
        { 
            title: "Reverse String", 
            difficulty: "Easy",
            desc: "Write a function that reverses a string. The input string is given as an array of characters s. You must do this by modifying the input array in-place.", 
            input: "s = ['h','e','l','l','o']", 
            output: "['o','l','l','e','h']", 
            boilerplate: "function reverseString(s) {\n    // Write your code here\n};" 
        }
    ];

    function openAgreement(l) { currentLang = l; document.getElementById('modal-overlay').style.display = 'flex'; }
    
    function enterPractice() { 
        document.getElementById('dashboard').classList.add('hidden');
        document.getElementById('modal-overlay').style.display = 'none';
        document.getElementById('practice-view').style.display = 'block';
        loadProblem();
    }

    function loadProblem() {
        const p = problems[problemIdx];
        document.getElementById('prob-indicator').innerText = `Problem ${problemIdx + 1} of 3`;
        document.getElementById('btn-prev').style.visibility = problemIdx === 0 ? "hidden" : "visible";
        document.getElementById('btn-next').innerHTML = problemIdx === 2 ? `Finish <i data-lucide="check-square"></i>` : `Next <i data-lucide="chevron-right"></i>`;
        document.getElementById('editor-field').innerText = p.boilerplate;
        document.getElementById('output-field').classList.remove('visible');
        switchTab('desc');
        lucide.createIcons();
    }

    function switchTab(type) {
        currentView = type;
        const p = problems[problemIdx];
        const content = document.getElementById('problem-content');
        document.getElementById('tab-desc').classList.toggle('active', type === 'desc');
        document.getElementById('tab-cases').classList.toggle('active', type === 'cases');
        
        if(type === 'desc') {
            content.innerHTML = `
                <h1 style="margin:0">${p.title}</h1>
                <div class="difficulty-tag">${p.difficulty}</div>
                <p style="line-height:1.6; color:#4b5563">${p.desc}</p>
                <h4 style="margin-top:2rem">Input / Output Format</h4>
                <div style="background:#f9fafb; border:1px solid var(--border); padding:1rem; border-radius:8px; font-family:monospace; font-size:0.9rem">
                    Input: ${p.input}<br>Output: ${p.output}
                </div>
            `;
        } else {
            content.innerHTML = `
                <h3 style="margin-top:0">Sample Case 1</h3>
                <div style="background:#f9fafb; border:1px solid var(--border); padding:1rem; border-radius:8px; font-family:monospace; font-size:0.9rem; margin-bottom:1.5rem">
                    <strong>Input:</strong> ${p.input}<br>
                    <strong>Expected Output:</strong> ${p.output}
                </div>
                <p style="color:var(--text-muted); font-size:0.9rem">Click "Run Code" to see output against this case.</p>
            `;
        }
    }

    function changeProblem(dir) {
        if(dir === 1 && problemIdx === 2) { 
            submitSolution();
            return;
        }
        problemIdx += dir;
        loadProblem();
    }

    function runCode() {
        const out = document.getElementById('output-field');
        out.classList.add('visible');
        out.innerHTML = `<span style="color:var(--success-green); font-weight:bold">âœ” Success:</span> Output matches expected value.<br><span style="color:var(--text-muted)">Actual Output: ${problems[problemIdx].output}</span>`;
    }

    function submitSolution() {
        if(confirm("Ready to submit your final solutions?")) {
            document.getElementById('practice-view').style.display = 'none';
            document.getElementById('success-view').classList.remove('hidden');
            lucide.createIcons();
        }
    }
</script>
</body>
</html>